<!-- dashboard.html -->
<!DOCTYPE html>
<html>
  <head>
    <title>Dashboard</title>
  </head>
  <body>
    <h1>Bienvenido al Dashboard</h1>
    <p>Usuario logueado: <strong id="nombreUsuario">Cargando...</strong></p>
    <p>Contenido protegido con JWT.</p>

    <script>
      const token = localStorage.getItem("jwt");
      const email = localStorage.getItem("email");

      fetch(`/api/auth/usuario/${email}`, {
        headers: { Authorization: `Bearer ${token}` },
      })
        .then((res) => {
          if (!res.ok) throw new Error("Token invÃ¡lido");
          return res.json();
        })
        .then((data) => {
          document.getElementById("nombreUsuario").textContent = data.nombre;
        })
        .catch((err) => {
          localStorage.clear();
          window.location.href = "/login";
        });
    </script>
  </body>
</html>
